{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://luhtech.dev/schemas/decision-log-v1.json",
  "title": "Decision Log",
  "description": "Structured decision log for venture governance. Tracks key decisions with context, alternatives, rationale, and evidence.",
  "type": "object",
  "required": ["$schema", "version", "ventureId", "decisions"],
  "properties": {
    "$schema": {"type": "string", "const": "https://luhtech.dev/schemas/decision-log-v1.json"},
    "version": {"type": "string", "pattern": "^\\d+\\.\\d+\\.\\d+$"},
    "ventureId": {"type": "string", "pattern": "^[a-z][a-z0-9-]*$", "description": "Venture identifier"},
    "lastUpdated": {"type": "string", "format": "date-time"},
    "decisions": {"type": "array", "items": {"$ref": "#/definitions/decision"}}
  },
  "definitions": {
    "decision": {
      "type": "object",
      "required": ["decisionId", "timestamp", "title", "context", "decision", "rationale", "status", "category", "impact"],
      "properties": {
        "decisionId": {"type": "string", "pattern": "^d-\\d{4}-\\d{2}-\\d{2}-[a-z0-9-]+$"},
        "timestamp": {"type": "string", "format": "date-time"},
        "title": {"type": "string", "maxLength": 200},
        "context": {"type": "string"},
        "alternatives": {"type": "array", "items": {"$ref": "#/definitions/alternative"}},
        "decision": {"type": "string"},
        "rationale": {"type": "string"},
        "status": {"type": "string", "enum": ["proposed", "approved", "implemented", "superseded", "rejected"]},
        "category": {"type": "string", "enum": ["architecture", "infrastructure", "api-design", "governance", "business", "product", "team", "funding", "legal"]},
        "impact": {"type": "string", "enum": ["critical", "high", "medium", "low"]},
        "approvedBy": {"type": "array", "items": {"type": "string"}},
        "impactedDeliverables": {"type": "array", "items": {"type": "string"}},
        "evidence": {"type": "array", "items": {"type": "string"}},
        "relatedDecisions": {"type": "array", "items": {"type": "string"}},
        "supersededBy": {"type": ["string", "null"]},
        "tags": {"type": "array", "items": {"type": "string"}},
        "reviewDate": {"type": ["string", "null"], "format": "date"}
      }
    },
    "alternative": {
      "type": "object",
      "required": ["option"],
      "properties": {
        "option": {"type": "string"},
        "pros": {"type": "array", "items": {"type": "string"}},
        "cons": {"type": "array", "items": {"type": "string"}},
        "estimatedEffort": {"type": "string"},
        "riskLevel": {"type": "string", "enum": ["low", "medium", "high", "critical"]}
      }
    }
  }
}
